# Миграция статусов заказов

## Описание

Этот скрипт мигрирует старые статусы заказов (`preparing`, `ready`, `delivered`) в новый статус `confirmed`.

## Запуск миграции

```bash
cd server
npm run migrate:order-statuses
```

Или напрямую через tsx:

```bash
cd server
npx tsx src/migrations/migrateOrderStatuses.ts
```

## Что делает миграция

1. Подключается к MongoDB
2. Находит все заказы со статусами: `preparing`, `ready`, `delivered`
3. Обновляет их статус на `confirmed`
4. Обновляет поле `statusChangedAt` на текущую дату
5. Выводит количество обновленных заказов

## Важно

- Убедитесь, что переменная окружения `MONGODB_URI` настроена правильно
- Рекомендуется сделать резервную копию базы данных перед запуском миграции
- Миграция безопасна для повторного запуска (idempотентна)

